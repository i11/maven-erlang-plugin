<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Nov 15, 2012 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Maven Erlang Plug-In - </title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20121115" />
    <meta http-equiv="Content-Language" content="en" />
        
  </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                Maven Erlang Plug-In
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
        
                <div class="xleft">
        <span id="publishDate">Last Published: 2012-11-15</span>
                  &nbsp;| <span id="projectVersion">Version: 2.3.0-SNAPSHOT</span>
                      </div>
            <div class="xright">        
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
        
                                <h5>Overview</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
                          <a href="../plugin-configuration.html" title="Plugin Configuration">Plugin Configuration</a>
            </li>
                  <li class="none">
                          <a href="../project-configuration.html" title="Project Configuration">Project Configuration</a>
            </li>
                  <li class="none">
                          <a href="../changes-report.html" title="Releasenotes">Releasenotes</a>
            </li>
                  <li class="none">
                          <a href="../plugin-info.html" title="Goals">Goals</a>
            </li>
                  <li class="none">
                          <a href="../faq.html" title="FAQ">FAQ</a>
            </li>
          </ul>
                       <h5>Examples</h5>
                  <ul>
                  <li class="none">
                          <a href="../examples/setup.html" title="- Create an application project">- Create an application project</a>
            </li>
                  <li class="none">
                          <a href="../examples/compile.html" title="- Compiling and testing an application">- Compiling and testing an application</a>
            </li>
                  <li class="none">
                          <a href="../examples/release-setup.html" title="- Create a release project">- Create a release project</a>
            </li>
                  <li class="none">
                          <a href="../examples/coverage.html" title="- Generate a coverage report">- Generate a coverage report</a>
            </li>
                  <li class="none">
                          <a href="../examples/dialyzer.html" title="- Running dialyzer on a project">- Running dialyzer on a project</a>
            </li>
                  <li class="none">
                          <a href="../examples/running.html" title="- Running your application">- Running your application</a>
            </li>
                  <li class="none">
                          <a href="../examples/uploading.html" title="- Uploading code on a remote node">- Uploading code on a remote node</a>
            </li>
                  <li class="none">
                          <a href="../examples/package-release.html" title="- Packaging a release">- Packaging a release</a>
            </li>
                  <li class="none">
            <strong>- More on releases</strong>
          </li>
          </ul>
                       <h5>Project</h5>
                  <ul>
                  <li class="none">
                          <a href="../project-summary.html" title="Summary">Summary</a>
            </li>
                  <li class="none">
                          <a href="../team-list.html" title="Team">Team</a>
            </li>
                  <li class="none">
                          <a href="../license.html" title="License">License</a>
            </li>
                  <li class="none">
                          <a href="../source-repository.html" title="Source code">Source code</a>
            </li>
                  <li class="none">
                          <a href="../issue-tracking.html" title="Issue tracking">Issue tracking</a>
            </li>
          </ul>
                       <h5>Development</h5>
                  <ul>
                  <li class="none">
                          <a href="https://sourceforge.net/projects/erlang-plugin/" class="externalLink" title="Sourceforge">Sourceforge</a>
            </li>
                  <li class="none">
                          <a href="../development.html" title="Overview">Overview</a>
            </li>
          </ul>
                       <h5>Reports</h5>
                  <ul>
                  <li class="none">
                          <a href="../surefire-report.html" title="Unit tests">Unit tests</a>
            </li>
                  <li class="none">
                          <a href="../invoker-report.html" title="Integration tests">Integration tests</a>
            </li>
                  <li class="none">
                          <a href="../cobertura/index.html" title="Test coverage">Test coverage</a>
            </li>
                  <li class="none">
                          <a href="../taglist.html" title="Tag list">Tag list</a>
            </li>
                  <li class="none">
                          <a href="../apidocs/index.html" title="Java API">Java API</a>
            </li>
          </ul>
                       <h5>Dependencies</h5>
                  <ul>
                  <li class="none">
                          <a href="../dependencies.html" title="Dependencies">Dependencies</a>
            </li>
                  <li class="none">
                          <a href="../plugin-management.html" title="Plug-In management">Plug-In management</a>
            </li>
                  <li class="none">
                          <a href="../plugins.html" title="Plug-Ins">Plug-Ins</a>
            </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                   
        
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>More on releases<a name="More_on_releases"></a></h2><p>The following example focuses on advanced features the maven-erlang-plugin provides for release projects. Lets assume the following small application project named <tt>app</tt>:</p><img src="../erlang-release-app1-example.png" alt="Version 1 of the <tt>app</tt> application." /><p>After installing the application using <tt>mvn install</tt> the application is available to release projects. The listing below shows an erlang release project named <tt>rel</tt> depending on the <tt>app</tt> application.</p><img src="../erlang-release-rel1-example.png" alt="Version 1 of the <tt>rel</tt> release." /><div class="section"><h3>Target system creation<a name="Target_system_creation"></a></h3><p>On UNIX systems the maven-erlang-plugin provides the possibility to create target systems from release projects according to the OTP design principles. The target system will contain the erlang emulator as well as the necessary start and attach scripts. To create a target system simply type <tt>mvn erlang:target-system</tt>. You'll see something like the following:</p><div class="source"><pre>[tobias@tirana rel]$ mvn erlang:target-system
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building An erlang-rel release. 1
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] &gt;&gt;&gt; maven-erlang-plugin:2.3.0-SNAPSHOT:target-system (default-cli) @ rel &gt;&gt;&gt;
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:validate (default-validate) @ rel ---
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:initialize (default-initialize) @ rel ---
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:extract-dependencies (default-extract-dependencies) @ rel ---
[INFO] Processed project dependencies:
[INFO]  * app-1 (skipped)
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:reload-dependencies (default-reload-dependencies) @ rel ---
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:generate-release-resources (default-generate-release-resources) @ rel ---
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:test-release (default-test-release) @ rel ---
[INFO] ------------------------------------------------------------------------
[INFO]  T E S T - R U N N E R
[INFO] ------------------------------------------------------------------------
[INFO] All tests passed.
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:dialyzer (default-dialyzer) @ rel ---
[INFO] ------------------------------------------------------------------------
[INFO]  D I A L Y Z E R
[INFO] ------------------------------------------------------------------------
[INFO] Last dialyzer run is still up to date.
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:package-release (default-package-release) @ rel ---
[INFO] ------------------------------------------------------------------------
[INFO]  P A C K A G E R
[INFO] ------------------------------------------------------------------------
[INFO] Successfully created release package:
[INFO] /home/tobias/rel/target/rel-1.tar.gz
[INFO] 
[INFO] &lt;&lt;&lt; maven-erlang-plugin:2.3.0-SNAPSHOT:target-system (default-cli) @ rel &lt;&lt;&lt;
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:target-system (default-cli) @ rel ---
[INFO] ------------------------------------------------------------------------
[INFO]  T A R G E T - S Y S T E M - P A C K A G E R
[INFO] ------------------------------------------------------------------------
[INFO] Successfully created target system package:
[INFO] /home/tobias/rel/target/rel-1-target-system.tar.gz
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 8.204s
[INFO] Finished at: Tue Mar 06 09:01:07 CET 2012
[INFO] Final Memory: 9M/105M
[INFO] ------------------------------------------------------------------------
[INFO] Successfully shut down 'rel-maven-erlang-plugin-backend@192.168.100.29'
[INFO] ------------------------------------------------------------------------
[tobias@tirana rel]$ ls -l target/
total 24544
-rw-rw-r-- 1 tobias tobias        0  6. M&#xe4;r 09:00 backend.log
drwxrwxr-x 3 tobias tobias     4096  6. M&#xe4;r 09:00 lib
-rw-rw-r-- 1 tobias tobias     9954  6. M&#xe4;r 09:01 rel-1.boot
-rw-rw-r-- 1 tobias tobias      161  6. M&#xe4;r 09:01 rel-1.rel
-rw-rw-r-- 1 tobias tobias    12136  6. M&#xe4;r 09:01 rel-1.script
-rw-rw-r-- 1 tobias tobias 12548637  6. M&#xe4;r 09:01 rel-1-target-system.tar.gz
-rw-rw-r-- 1 tobias tobias 12539861  6. M&#xe4;r 09:01 rel-1.tar.gz
-rw-rw-r-- 1 tobias tobias       15  6. M&#xe4;r 09:01 relup
-rw-rw-r-- 1 tobias tobias        4  6. M&#xe4;r 09:01 sys.config
[tobias@tirana rel]$ </pre></div><p>The target system is contained in the <tt>target/rel-1-target-system.tar.gz</tt> archive. After unpacking it into a temporary folder we can list the content of the archive.</p><div class="source"><pre>[tobias@tirana tmp]$ mv ../rel/target/rel-1-target-system.tar.gz .
[tobias@tirana tmp]$ tar xzf rel-1-target-system.tar.gz 
[tobias@tirana tmp]$ ls -l
total 12276
drwxrwxr-x 2 tobias tobias     4096  6. M&#xe4;r 09:02 bin
drwxrwxr-x 3 tobias tobias     4096  6. M&#xe4;r 09:02 erts-5.9
drwxrwxr-x 8 tobias tobias     4096  6. M&#xe4;r 09:02 lib
drwxrwxr-x 2 tobias tobias     4096  6. M&#xe4;r 09:02 log
-rw-rw-r-- 1 tobias tobias 12548637  6. M&#xe4;r 09:01 rel-1-target-system.tar.gz
drwxrwxr-x 3 tobias tobias     4096  6. M&#xe4;r 09:02 releases
[tobias@tirana tmp]$ </pre></div><p>The target system is started using the <tt>bin/start</tt> script. The target system's root directory has to be given as parameter to the script. We will now start the target system in non-daemon mode:</p><div class="source"><pre>[tobias@tirana tmp]$ bin/start --help
usage: bin/start [daemon|--daemon|-daemon] &lt;ROOTDIR&gt; [ERL_EXEC_ARGS]
[tobias@tirana tmp]$ bin/start `pwd` -name test@localhost.localdomain -setcookie secret
Erlang R15B (erts-5.9) [source] [64-bit] [smp:2:2] [async-threads:0] [hipe] [kernel-poll:false]


=PROGRESS REPORT==== 6-Mar-2012::09:03:21 ===
          supervisor: {local,sasl_safe_sup}
             started: [{pid,&lt;0.40.0&gt;},
                       {name,alarm_handler},
                       {mfargs,{alarm_handler,start_link,[]}},
                       {restart_type,permanent},
                       {shutdown,2000},
                       {child_type,worker}]

=PROGRESS REPORT==== 6-Mar-2012::09:03:21 ===
          supervisor: {local,sasl_safe_sup}
             started: [{pid,&lt;0.41.0&gt;},
                       {name,overload},
                       {mfargs,{overload,start_link,[]}},
                       {restart_type,permanent},
                       {shutdown,2000},
                       {child_type,worker}]

=PROGRESS REPORT==== 6-Mar-2012::09:03:21 ===
          supervisor: {local,sasl_sup}
             started: [{pid,&lt;0.39.0&gt;},
                       {name,sasl_safe_sup},
                       {mfargs,
                           {supervisor,start_link,
                               [{local,sasl_safe_sup},sasl,safe]}},
                       {restart_type,permanent},
                       {shutdown,infinity},
                       {child_type,supervisor}]

=PROGRESS REPORT==== 6-Mar-2012::09:03:21 ===
          supervisor: {local,sasl_sup}
             started: [{pid,&lt;0.42.0&gt;},
                       {name,release_handler},
                       {mfargs,{release_handler,start_link,[]}},
                       {restart_type,permanent},
                       {shutdown,2000},
                       {child_type,worker}]

=PROGRESS REPORT==== 6-Mar-2012::09:03:21 ===
         application: sasl
          started_at: 'test@localhost.localdomain'

=PROGRESS REPORT==== 6-Mar-2012::09:03:21 ===
          supervisor: {local,app_sup}
             started: [{pid,&lt;0.48.0&gt;},
                       {name,app_server},
                       {mfargs,{app_server,start_link,[]}},
                       {restart_type,permanent},
                       {shutdown,2000},
                       {child_type,worker}]

=PROGRESS REPORT==== 6-Mar-2012::09:03:21 ===
         application: app
          started_at: 'test@localhost.localdomain'

=PROGRESS REPORT==== 6-Mar-2012::09:03:21 ===
         application: gs
          started_at: 'test@localhost.localdomain'

=PROGRESS REPORT==== 6-Mar-2012::09:03:21 ===
         application: tv
          started_at: 'test@localhost.localdomain'
Eshell V5.9  (abort with ^G)
(test@localhost.localdomain)1&gt; application:which_applications().
[{tv,&quot;tv Table Visualizer&quot;,&quot;2.1.4.8&quot;},
 {gs,&quot;GS  The Graphics System&quot;,&quot;1.5.15&quot;},
 {app,&quot;null&quot;,&quot;1&quot;},
 {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.2&quot;},
 {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.18&quot;},
 {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.15&quot;}]
(test@localhost.localdomain)2&gt; </pre></div><p>The target system is started with the boot script generated for this release. All configured applications (including <tt>app</tt>) are started automatically.</p></div><div class="section"><h3>Release upgrades<a name="Release_upgrades"></a></h3><p>Now that we have a running target system we would like to see the magic of erlang's hitless updates. To be able to upgrade to something we will slightly modify the <tt>app</tt> application. We'll start by modifying the project generating the <tt>.appup</tt> file.</p><div class="source"><pre>[tobias@tirana app]$ mvn erlang:appup
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building An erlang-otp application. 2
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] &gt;&gt;&gt; maven-erlang-plugin:2.3.0-SNAPSHOT:appup (default-cli) @ app &gt;&gt;&gt;
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:validate (default-validate) @ app ---
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:initialize (default-initialize) @ app ---
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:extract-dependencies (default-extract-dependencies) @ app ---
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:reload-dependencies (default-reload-dependencies) @ app ---
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:generate-resources (default-generate-resources) @ app ---
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:compile (default-compile) @ app ---
[INFO] ------------------------------------------------------------------------
[INFO]  C O M P I L E R
[INFO] ------------------------------------------------------------------------
[INFO] Compiled:
[INFO]  * /home/tobias/app/src/main/erlang/app.erl
[INFO]  * /home/tobias/app/src/main/erlang/app_sup.erl
[INFO]  * /home/tobias/app/src/main/erlang/app_server.erl
[INFO] Successfully compiled the project sources.
[INFO] No MIBs to compile.
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:test-initialize (default-test-initialize) @ app ---
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:reload-test-dependencies (default-reload-test-dependencies) @ app ---
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:generate-test-resources (default-generate-test-resources) @ app ---
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:test-compile (default-test-compile) @ app ---
[INFO] ------------------------------------------------------------------------
[INFO]  T E S T - C O M P I L E R
[INFO] ------------------------------------------------------------------------
[INFO] Successfully compiled the project test sources.
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:test (default-test) @ app ---
[INFO] ------------------------------------------------------------------------
[INFO]  T E S T - R U N N E R
[INFO] ------------------------------------------------------------------------
[WARNING]   There were no tests to run.
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:dialyzer (default-dialyzer) @ app ---
[INFO] ------------------------------------------------------------------------
[INFO]  D I A L Y Z E R
[INFO] ------------------------------------------------------------------------
[INFO] Dialyzer run successful.
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:package (default-package) @ app ---
[INFO] ------------------------------------------------------------------------
[INFO]  P A C K A G E R
[INFO] ------------------------------------------------------------------------
[INFO] Successfully packaged application:
[INFO] /home/tobias/app/target/app-2.tar.gz
[INFO] 
[INFO] &lt;&lt;&lt; maven-erlang-plugin:2.3.0-SNAPSHOT:appup (default-cli) @ app &lt;&lt;&lt;
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:appup (default-cli) @ app ---
[INFO] ------------------------------------------------------------------------
[INFO]  A P P U P - G E N E R A T O R
[INFO] ------------------------------------------------------------------------
[INFO] artifact eu.lindenbaum:app: checking for updates from nexus
[INFO] Successfully generated application upgrade template.
[INFO] /home/tobias/app/target/app.appup:
[INFO] {${VERSION},
[INFO]  [{&quot;1&quot;, [{load_module,app}, {update,app_sup,supervisor}, {update,app_server}]}],
[INFO]  [{&quot;1&quot;, [{load_module,app}, {update,app_sup,supervisor}, {update,app_server}]}]}.
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 18.965s
[INFO] Finished at: Tue Mar 06 09:06:01 CET 2012
[INFO] Final Memory: 10M/105M
[INFO] ------------------------------------------------------------------------
[INFO] Successfully shut down 'app-maven-erlang-plugin-test-backend@192.168.100.29'
[INFO] ------------------------------------------------------------------------
[INFO] Successfully shut down 'app-maven-erlang-plugin-backend@192.168.100.29'
[INFO] ------------------------------------------------------------------------
[tobias@tirana app]$ cp target/app.appup src/main/erlang/</pre></div><p>Version 2 of the <tt>app</tt> application will now look like this:</p><img src="../erlang-release-app2-example.png" alt="Version 2 of the <tt>app</tt> application." /><p>After installing the application with <tt>mvn install</tt> we move on to the release project. We include version 2 of <tt>app</tt>, increase the release project version and generate the relup file:</p><div class="source"><pre>[tobias@tirana rel]$ mvn erlang:relup
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building An erlang-rel release. 2
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] &gt;&gt;&gt; maven-erlang-plugin:2.3.0-SNAPSHOT:relup (default-cli) @ rel &gt;&gt;&gt;
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:validate (default-validate) @ rel ---
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:initialize (default-initialize) @ rel ---
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:extract-dependencies (default-extract-dependencies) @ rel ---
[INFO] Processed project dependencies:
[INFO]  * app-2 (extracted)
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:reload-dependencies (default-reload-dependencies) @ rel ---
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:generate-release-resources (default-generate-release-resources) @ rel ---
[INFO] 
[INFO] &lt;&lt;&lt; maven-erlang-plugin:2.3.0-SNAPSHOT:relup (default-cli) @ rel &lt;&lt;&lt;
[INFO] 
[INFO] --- maven-erlang-plugin:2.3.0-SNAPSHOT:relup (default-cli) @ rel ---
[INFO] ------------------------------------------------------------------------
[INFO]  R E L U P - G E N E R A T O R
[INFO] ------------------------------------------------------------------------
[INFO] artifact eu.lindenbaum:rel: checking for updates from nexus
[INFO] Successfully generated release upgrade file.
[INFO] /home/tobias/rel/target/relup:
[INFO] {${VERSION},
[INFO]  [{&quot;1&quot;,[],
[INFO]    [{load_object_code,{app,&quot;2&quot;,[app,app_sup,app_server]}},
[INFO]     point_of_no_return,
[INFO]     {load,{app,brutal_purge,brutal_purge}},
[INFO]     {suspend,[app_sup]},
[INFO]     {load,{app_sup,brutal_purge,brutal_purge}},
[INFO]     {code_change,up,[{app_sup,[]}]},
[INFO]     {resume,[app_sup]},
[INFO]     {suspend,[app_server]},
[INFO]     {load,{app_server,brutal_purge,brutal_purge}},
[INFO]     {resume,[app_server]}]}],
[INFO]  [{&quot;1&quot;,[],
[INFO]    [{load_object_code,{app,&quot;1&quot;,[app,app_sup,app_server]}},
[INFO]     point_of_no_return,
[INFO]     {load,{app,brutal_purge,brutal_purge}},
[INFO]     {suspend,[app_sup]},
[INFO]     {load,{app_sup,brutal_purge,brutal_purge}},
[INFO]     {code_change,down,[{app_sup,[]}]},
[INFO]     {resume,[app_sup]},
[INFO]     {suspend,[app_server]},
[INFO]     {load,{app_server,brutal_purge,brutal_purge}},
[INFO]     {resume,[app_server]}]}]}.
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 9.215s
[INFO] Finished at: Tue Mar 06 09:11:41 CET 2012
[INFO] Final Memory: 10M/105M
[INFO] ------------------------------------------------------------------------
[INFO] Successfully shut down 'rel-maven-erlang-plugin-backend@192.168.100.29'
[INFO] ------------------------------------------------------------------------
[tobias@tirana rel]$ cp target/relup .</pre></div><p>The resulting release project will now look like this:</p><img src="../erlang-release-rel2-example.png" alt="Version 2 of the <tt>rel</tt> release." /><p>After installing the release project the new release package is available in the <tt>target</tt> directory. The release package can directly be copied into the <tt>releases</tt> directory of our running target system (see previous section).</p><div class="source"><pre>[tobias@tirana rel]$ ls -l target/
total 48
-rw-rw-r-- 1 tobias tobias  3418  6. M&#xe4;r 09:11 backend.log
drwxrwxr-x 3 tobias tobias  4096  6. M&#xe4;r 09:11 lib
drwxrwxr-x 4 tobias tobias  4096  6. M&#xe4;r 09:11 rel-1
-rw-rw-r-- 1 tobias tobias  9954  6. M&#xe4;r 09:11 rel-2.boot
-rw-rw-r-- 1 tobias tobias   161  6. M&#xe4;r 09:11 rel-2.rel
-rw-rw-r-- 1 tobias tobias 12138  6. M&#xe4;r 09:11 rel-2.script
-rw-rw-r-- 1 tobias tobias   771  6. M&#xe4;r 09:11 relup
-rw-rw-r-- 1 tobias tobias     4  6. M&#xe4;r 09:11 sys.config
[tobias@tirana rel]$ mv target/rel-2.tar.gz ../tmp/releases/</pre></div><p>Going back to the erlang shell on the running target system we can now install the new release:</p><div class="source"><pre>(test@localhost.localdomain)2&gt; 
(test@localhost.localdomain)2&gt; release_handler:unpack_release(&quot;rel-2&quot;).
{ok,&quot;2&quot;}
(test@localhost.localdomain)3&gt; app_server ! show_info. 

=INFO REPORT==== 6-Mar-2012::09:16:30 ===
Running version 1.
show_info
(test@localhost.localdomain)4&gt; release_handler:install_release(&quot;2&quot;).
{ok,&quot;1&quot;,[]}
(test@localhost.localdomain)5&gt; app_server ! show_info.
show_info

=INFO REPORT==== 6-Mar-2012::09:16:53 ===
Running version 2.
(test@localhost.localdomain)6&gt; release_handler:make_permanent(&quot;2&quot;).
ok
(test@localhost.localdomain)7&gt; application:which_applications().
[{tv,&quot;tv Table Visualizer&quot;,&quot;2.1.4.8&quot;},
 {gs,&quot;GS  The Graphics System&quot;,&quot;1.5.15&quot;},
 {app,&quot;null&quot;,&quot;2&quot;},
 {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.2&quot;},
 {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.18&quot;},
 {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.15&quot;}]
(test@localhost.localdomain)8&gt;</pre></div><p>The new release version is now the permanent release that will be booted on emulator restart:</p><div class="source"><pre>(test@localhost.localdomain)8&gt; q().
ok
(test@localhost.localdomain)9&gt; [tobias@tirana tmp]$ 
[tobias@tirana tmp]$ bin/start `pwd` -name test@localhost.localdomain -setcookie secret
Erlang R15B (erts-5.9) [source] [64-bit] [smp:2:2] [async-threads:0] [hipe] [kernel-poll:false]


=PROGRESS REPORT==== 6-Mar-2012::10:13:48 ===
          supervisor: {local,sasl_safe_sup}
             started: [{pid,&lt;0.40.0&gt;},
                       {name,alarm_handler},
                       {mfargs,{alarm_handler,start_link,[]}},
                       {restart_type,permanent},
                       {shutdown,2000},
                       {child_type,worker}]

=PROGRESS REPORT==== 6-Mar-2012::10:13:48 ===
          supervisor: {local,sasl_safe_sup}
             started: [{pid,&lt;0.41.0&gt;},
                       {name,overload},
                       {mfargs,{overload,start_link,[]}},
                       {restart_type,permanent},
                       {shutdown,2000},
                       {child_type,worker}]

=PROGRESS REPORT==== 6-Mar-2012::10:13:48 ===
          supervisor: {local,sasl_sup}
             started: [{pid,&lt;0.39.0&gt;},
                       {name,sasl_safe_sup},
                       {mfargs,
                           {supervisor,start_link,
                               [{local,sasl_safe_sup},sasl,safe]}},
                       {restart_type,permanent},
                       {shutdown,infinity},
                       {child_type,supervisor}]

=PROGRESS REPORT==== 6-Mar-2012::10:13:48 ===
          supervisor: {local,sasl_sup}
             started: [{pid,&lt;0.42.0&gt;},
                       {name,release_handler},
                       {mfargs,{release_handler,start_link,[]}},
                       {restart_type,permanent},
                       {shutdown,2000},
                       {child_type,worker}]

=PROGRESS REPORT==== 6-Mar-2012::10:13:48 ===
         application: sasl
          started_at: 'test@localhost.localdomain'

=PROGRESS REPORT==== 6-Mar-2012::10:13:48 ===
          supervisor: {local,app_sup}
             started: [{pid,&lt;0.48.0&gt;},
                       {name,app_server},
                       {mfargs,{app_server,start_link,[]}},
                       {restart_type,permanent},
                       {shutdown,2000},
                       {child_type,worker}]

=PROGRESS REPORT==== 6-Mar-2012::10:13:48 ===
         application: app
          started_at: 'test@localhost.localdomain'

=PROGRESS REPORT==== 6-Mar-2012::10:13:48 ===
         application: gs
          started_at: 'test@localhost.localdomain'

=PROGRESS REPORT==== 6-Mar-2012::10:13:48 ===
         application: tv
          started_at: 'test@localhost.localdomain'
Eshell V5.9  (abort with ^G)
(test@localhost.localdomain)1&gt; application:which_applications().
[{tv,&quot;tv Table Visualizer&quot;,&quot;2.1.4.8&quot;},
 {gs,&quot;GS  The Graphics System&quot;,&quot;1.5.15&quot;},
 {app,&quot;null&quot;,&quot;2&quot;},
 {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.2&quot;},
 {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;1.18&quot;},
 {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;2.15&quot;}]
(test@localhost.localdomain)2&gt; </pre></div></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">Copyright &#169;                    2012
                        <a href="http://www.lindenbaum.eu/">Lindenbaum GmbH</a>.
            All Rights Reserved.      
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
